Language: Русский | [English](./README.md)

## Что это за репозиторий и для чего

Это просто preinstall и postinstall и немного иные скрипты извлеченные из pkg-файлов (установщиков для macOS).

Я их собирал для себя просто, чтобы видеть примеры как другие разработчики делают логику установки своих продуктов на macOS. Возможно эти скрипты помогут кому-то еще как примеры для написания shell/bash/zsh-кода или своих preinstall/postinstall скриптов.

Тем более что на текущий момент нет документации как правильно делать pkg-файлы на macOS. В manual-страницах по утилитам `pkgbuild` и `productbuild` ничего не сказано про переменные окружения `$0`, `$1`, `$2`, `$3`, `$4`, но в некоторых preinstall/postinstall скриптах эти переменные документируются прямо и понятно. 

Вообще preinstall/postinstall скрипты не обязательно должны быть написаны на shell/bash/zsh. Файлы preinstall/postinstall могут быть любым исполняемым файлом, в том числе бинарным (так сделано в установщике Clip Studio Paint), а также могу быть скриптам на `perl` (так сделано в установщике ON1 Photo RAW) и я не видел какой-либо документации, в которой это написано.

Извлечь или исследовать внутренности pkg-файлов можно, например с помощью приложений [Pacifist](https://www.charlessoft.com/) и [Suspicious Package](https://mothersruin.com/software/SuspiciousPackage/) или с помощью `pkgutil` или `xar` или других умных архиваторов.

Вообще тема исследования и создания pkg-файлов это отдельная тема, которая, увы, не документирована Apple (я не нашел у них документации об этом).

[Здесь](./scripts/) только примеры preinstall и postinstall и некоторых других скриптов из pkg-файлов.